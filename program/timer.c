#include"timer.h"

/***************T1************TMOD***************T0*********************
****B7		B6		B5		B4		|B3		B2		B1		B0	  	****
****GATE	C/T-	M1		M2		|GATE	C/T-	M1		M2		****
************************************************************************/
/*****************************AUXR**************************************
****B7		B6		B5		B4		|B3		B2		B1		B0	  	****
****T0*12	T1*12	()		T2R		|T2_C/T	T2*12	()		S1ST2	****
************************************************************************/
void timer0_init()
{	
	TMOD &= 0xF0;//清空
	AUXR |= 0x80;//12分频		
	TL0 = (65535-40000)/256;//每1ms进入一次中断			
	TH0 = (65535-40000)%256;				
	TR0 = 1;//定时器运行

//	TL0 = 0xA0;		//设置定时初值
//	TH0 = 0xF6;		//设置定时初值
	 
}

void timer1_init()
{	
	AUXR |= 0x40;		//定时器时钟1T模式
	TMOD &= 0x0F;		//设置定时器模式
	TL1 = 0x00;		//设置定时初值
	TH1 = 0x00;		//设置定时初值
	TF1 = 0;		//清除TF1标志
	TR1 = 0;			 
}
/*
void timer2_init()
{
 	T2L = (65535-9256)/256;			
	T2H = (65535-9256)%256;
	AUXR &= 0X10;		
}
/*************************T4T3M/T3T4M***********************************
****B7		B6		B5		B4		|B3		B2		B1		B0	  	****
****T4R		T4_C/T	T4*12	T4CLKO	|T4R	T3_C/T	T3*12	T3CLKO	****
************************************************************************
void timer3_init()
{	
	TMOD &= 0xF0;		
	T3L = (65535-9256)/256;			
	T3H = (65535-9256)%256;				
	T4T3M |= 0X08;		 
}

void timer4_init()
{	
	TMOD &= 0xF0;		
	T4L = (65535-9256)/256;				
	T4H = (65535-9256)%256;				
	T4T3M |= 0X80;		 
}

/*************************************************************************
****							INTERRUP							  ****
**************************************************************************/

void int_timer0_init()
{
 	ET0 = 1;
	EA = 1;
}
/*
void int_timer1_init()
{
 	ET1 = 1;
	EA = 0;
}
/********************************IE2************************************
****B7		B6		B5		B4		|B3		B2		B1		B0	  	****
****-		ET4		ET3		ES4		|ES3	ET2		ESPI	ES2		****
************************************************************************
void int_timer2_init()
{
 	IE2 |= 0X04;
	EA = 1;
}

void int_timer3_init()
{
 	IE2 |= 0X20;
	EA = 0;
}

void int_timer4_init()
{
 	IE2 |= 0X40;
	EA = 0;
}

*/