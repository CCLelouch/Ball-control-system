C51 COMPILER V9.00   SYSTEM                                                                11/04/2017 11:02:52 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE SYSTEM
OBJECT MODULE PLACED IN ..\output\System.obj
COMPILER INVOKED BY: D:\keil\keillc51\keillc51set\C51\BIN\C51.EXE ..\program\System.c BROWSE INCDIR(..\program) DEBUG OB
                    -JECTEXTEND PRINT(..\listing\System.lst) TABS(2) OBJECT(..\output\System.obj)

line level    source

   1          #include"system.h"
   2          #include"lcd12864.h"
   3          #include"Delay.H"
   4          #include"key.h"
   5          #include"buzzer.h"
   6          
   7          /**************************显示页面*****************************/
   8          uchar xdata Display[4][4][17]={
   9            {                                         
  10              {"init"},{"  小球控制系统"},{"  "},{" "}                //第一页
  11            },
  12            {
  13              {"  Set_distance"},{"Expect:00"},{"Distance:"},{"            next"}           //第二页
  14            },
  15            {
  16              {"  Action1"},{"32"},{"33"},{"back        next"}        //第三页
  17            },
  18            {
  19              {"  Action2"},{"42"},{"43"},{"back        next"}            //第四页
  20            }
  21          };
  22          uchar key_value[5]={0};
  23          uchar set_buff;
  24          /**************************************************************/
  25          
  26          State System_State=0;
  27          
  28          void Set_Distance()
  29          {
  30   1        int i=0,key_flag=0;
  31   1        key_value[0]=KEY4_scan();//将键值读入输入流
  32   1      
  33   1        switch(key_value[0])
  34   1        {
  35   2          case 1:
  36   2            {
  37   3              System_State = init;
  38   3              key_value[1]=0;
  39   3            }break;
  40   2          case 2:
  41   2            {
  42   3              if(set_buff==0)                   //0-16
  43   3                  set_buff=16;
  44   3              set_buff--;
  45   3              Display[1][1][8]='0'+set_buff%10; //0
  46   3              Display[1][1][7]='0'+set_buff/10; //10
  47   3      
  48   3            }break;
  49   2          case 3:
  50   2            {
  51   3              set_buff++;
  52   3              if(set_buff==16)                  //16-0
  53   3                set_buff=0;
  54   3              Display[1][1][8]='0'+set_buff%10; //0
C51 COMPILER V9.00   SYSTEM                                                                11/04/2017 11:02:52 PAGE 2   

  55   3              Display[1][1][7]='0'+set_buff/10; //10
  56   3            }break;
  57   2          case 4:
  58   2            {
  59   3              while(1)
  60   3              {
  61   4                ;
  62   4                if(KEY4_scan()==4)
  63   4                  break;
  64   4              }
  65   3                System_State = action1;
  66   3                Write_comordata(0,0x01);
  67   3                key_value[0]=0;
  68   3                P40=0;
  69   3      //        }
  70   3      //        else if(P40==0) 
  71   3      //        {
  72   3      //          P40=1;
  73   3      //          Buzzer(1);
  74   3      //        }
  75   3            }break;
  76   2          default:break;
  77   2        }
  78   1      }
  79          
  80          void System_init()
  81          {
  82   1        switch(System_State)
  83   1        {
  84   2          case init:
  85   2            {
  86   3              Write_comordata(0,0x01);                //清屏
  87   3              Delay(5);
  88   3              LCD12864_Display(1,&Display[0][1][0]);  //开机页面
  89   3              Delay(500);
  90   3              Write_comordata(0,0x01);                //清屏
  91   3              Delay(5);
  92   3              System_State=set_distance;
  93   3            }break;
  94   2          case set_distance:
  95   2            {
  96   3              LCD12864_Display(1,&Display[1][0][0]);
  97   3              LCD12864_Display(2,&Display[1][1][0]);
  98   3              LCD12864_Display(3,&Display[1][2][0]);
  99   3              LCD12864_Display(4,&Display[1][3][0]);
 100   3              Set_Distance();
 101   3            }break;
 102   2          case action1:
 103   2            {
 104   3              LCD12864_Display(1,&Display[2][0][0]);
 105   3              LCD12864_Display(2,&Display[2][1][0]);
 106   3              LCD12864_Display(3,&Display[2][2][0]);
 107   3              LCD12864_Display(4,&Display[2][3][0]);
 108   3            }break;
 109   2          case action2:
 110   2            {
 111   3              LCD12864_Display(1,&Display[3][0][0]);
 112   3              LCD12864_Display(2,&Display[3][1][0]);
 113   3              LCD12864_Display(3,&Display[3][2][0]);
 114   3              LCD12864_Display(4,&Display[3][3][0]);
 115   3            }break;
 116   2          case action3:
C51 COMPILER V9.00   SYSTEM                                                                11/04/2017 11:02:52 PAGE 3   

 117   2            {
 118   3              LCD12864_Display(1,&Display[2][0][0]);
 119   3              LCD12864_Display(2,&Display[2][1][0]);
 120   3              LCD12864_Display(3,&Display[2][2][0]);
 121   3              LCD12864_Display(4,&Display[2][3][0]);
 122   3            }break;
 123   2          default :break;
 124   2        }
 125   1      }
 126          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    312    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    272    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
